{% extends "layout.html" %} {% block content %}
<div class="d-flex justify-content-between align-items-center mb-3">
  <h4>Detail Upload</h4>
  <div>
    <a
      class="btn btn-sm btn-outline-secondary"
      href="{{ url_for('main.upload') }}"
      >‚Üê Kembali</a
    >
  </div>
</div>

<div class="card mb-3">
  <div class="card-body">
    <div><strong>Nama File:</strong> {{ up.original_filename }}</div>
    <div><strong>Diupload:</strong> {{ up.created_at }}</div>
    <div>
      <strong>Status:</strong> {% if up.processed_path %}Terproses{% else
      %}Raw{% endif %}
    </div>
    <div class="mt-2">
      {% if up.original_filename %}
      <a
        class="btn btn-sm btn-success"
        href="{{ url_for('main.download_raw', filename=up.original_filename) }}"
        >Download Raw</a
      >
      {% endif %}
      <form
        method="POST"
        action="{{ url_for('main.upload_reprocess', uid=up.id) }}"
        style="display: inline"
      >
        <button class="btn btn-sm btn-primary" type="submit">Reproses</button>
      </form>
      <form
        method="POST"
        action="{{ url_for('main.upload_delete', uid=up.id) }}"
        style="display: inline"
        onsubmit="return confirm('Hapus upload ini?')"
      >
        <button class="btn btn-sm btn-danger" type="submit">Hapus</button>
      </form>
    </div>
  </div>
</div>

<ul class="nav nav-tabs" id="myTab" role="tablist">
  <li class="nav-item" role="presentation">
    <button
      class="nav-link active"
      id="raw-tab"
      data-bs-toggle="tab"
      data-bs-target="#raw"
      type="button"
      role="tab"
    >
      Data Mentah (Excel)
    </button>
  </li>
  <li class="nav-item" role="presentation">
    <button
      class="nav-link"
      id="proc-tab"
      data-bs-toggle="tab"
      data-bs-target="#proc"
      type="button"
      role="tab"
    >
      Data Olah (CSV)
    </button>
  </li>
</ul>
<div class="tab-content border-start border-end border-bottom p-3">
  <div
    class="tab-pane fade show active"
    id="raw"
    role="tabpanel"
    aria-labelledby="raw-tab"
  >
    <div class="table-responsive">{{ raw_html|safe }}</div>
    <p class="text-muted mt-2">Menampilkan maksimal 100 baris pertama.</p>
  </div>
  <div
    class="tab-pane fade"
    id="proc"
    role="tabpanel"
    aria-labelledby="proc-tab"
  >
    <div class="table-responsive">{{ proc_html|safe }}</div>
    <p class="text-muted mt-2">Menampilkan maksimal 100 baris pertama.</p>
  </div>
</div>
{% endblock %}
